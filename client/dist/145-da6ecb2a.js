"use strict";(self.webpackChunkimmortal_regiment=self.webpackChunkimmortal_regiment||[]).push([[145],{5145:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var a=n(5893),r=n(4807),o=n(2594),l=n(7294),i=n(6088),s=n(2672),c=n(2540),u=n(9498),d=n(1861),p=n(8837),m=n(2484),f=n(5025),h=n(2779),b=n(3379),v=n.n(b),g=n(7795),x=n.n(g),y=n(569),j=n.n(y),w=n(3565),k=n.n(w),C=n(9216),R=n.n(C),S=n(4589),N=n.n(S),A=n(2670),I={};I.styleTagTransform=N(),I.setAttributes=k(),I.insert=j().bind(null,"head"),I.domAPI=x(),I.insertStyleElement=R(),v()(A.Z,I);const T=A.Z&&A.Z.locals?A.Z.locals:void 0;var P=function(){return P=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},P.apply(this,arguments)},Z=function(e){var t=e.items,n=e.onChange,o=e.optionsClassname,l=e.selectedItems,i=e.placeholder;return(0,a.jsxs)(h.R,P({as:"div",className:T.HSelect,value:l,onChange:function(e){return n(e)},multiple:!0},{children:[(0,a.jsx)(h.R.Button,P({className:T.trigger},{children:(0,a.jsx)(d.z,P({theme:p.bn.PRIMARY},{children:(null==l?void 0:l.length)?null==l?void 0:l.map((function(e){return e})).join(", "):i}))})),(0,a.jsx)(h.R.Options,P({className:(0,r.A)(T.options,{},[o])},{children:null==t?void 0:t.map((function(e){return(0,a.jsx)(h.R.Option,P({className:T.option,value:e.value},{children:function(t){var n,o=t.selected;return(0,a.jsx)("div",P({className:(0,r.A)("",(n={},n[T.selected]=o,n))},{children:e.content}))}}),e.value)}))}))]}))},O=n(6372),E=n(2943),H=n(6057),q=n(2384),z=n(9454),F={};F.styleTagTransform=N(),F.setAttributes=k(),F.insert=j().bind(null,"head"),F.domAPI=x(),F.insertStyleElement=R(),v()(z.Z,F);const M=z.Z&&z.Z.locals?z.Z.locals:void 0;var Y=n(797),D=function(){return D=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},D.apply(this,arguments)},K={createHeroPage:Y.cK,awardsManagerPage:E.NJ};const _=(0,l.memo)((function(e){var t=e.className,n=(0,s.T)(),h=(0,l.useState)({firstname:"",middlename:"",lastname:"",story:void 0,rank:""}),b=h[0],v=h[1],g=(0,l.useState)(""),x=g[0],y=g[1],j=(0,l.useState)(!1),w=j[0],k=j[1],C=(0,l.useState)([]),R=C[0],S=C[1],N=(0,l.useState)([]),A=N[0],I=N[1],T=(0,O.v9)(E.HQ.selectAll);(0,l.useEffect)((function(){document.title="Добавление героя",n((0,q.k)())}),[n]);var P,z=(0,l.useCallback)((function(e){return t=void 0,a=void 0,o=function(){var t;return function(e,t){var n,a,r,o,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,a=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((r=(r=l.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(a){switch(a.label){case 0:return e.preventDefault(),(t=new FormData(e.currentTarget)).append("awards",A.join(",")),[4,n((0,H.C)(t))];case 1:return"fulfilled"===a.sent().meta.requestStatus?(y("Герой успешно добавлен!"),k(!1)):(y("Произошла непредвиденная ошибка... ;("),k(!0)),[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function l(e){try{s(o.next(e))}catch(e){n(e)}}function i(e){try{s(o.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(l,i)}s((o=o.apply(t,a||[])).next())}));var t,a,r,o}),[n,A]),F=T.map((function(e){return(0,a.jsxs)("div",D({className:M.awardRow},{children:[(0,a.jsx)("img",{className:M.photo,src:"/images/awards/".concat(e.photo),alt:e.title}),(0,a.jsx)("h2",D({className:M.awardTitle},{children:e.title}))]}),e.id)}));return(0,a.jsx)(i.W,D({reducers:K},{children:(0,a.jsxs)(o.T,D({className:(0,r.A)("",{},[t])},{children:[x&&(0,a.jsx)(f.xv,{title:x,theme:w?f.lg.ERROR:f.lg.PRIMARY}),(0,a.jsxs)("form",D({className:M.createHeroForm,encType:"multipart/form-data",onSubmit:z},{children:[(0,a.jsx)(c.I,{autoFocus:!0,name:"lastname",placeholder:"Фамилия героя",type:"text",value:b.lastname,onChange:function(e){return v(D(D({},b),{lastname:e}))},required:!0}),(0,a.jsx)(c.I,{name:"firstname",placeholder:"Имя героя",type:"text",value:b.firstname,onChange:function(e){return v(D(D({},b),{firstname:e}))},required:!0}),(0,a.jsx)(c.I,{name:"middlename",placeholder:"Отчество героя",type:"text",value:b.middlename,onChange:function(e){return v(D(D({},b),{middlename:e}))},required:!0}),(0,a.jsx)(c.I,{name:"rank",placeholder:"Воинское звание",type:"text",value:b.rank,onChange:function(e){return v(D(D({},b),{rank:e}))},required:!0}),(0,a.jsx)(u.K,{name:"story",placeholder:"Ваша история...",value:b.story}),(0,a.jsx)(Z,{items:(P=[],T.forEach((function(e,t){P.push({value:e.title,content:F[t]})})),P),onChange:function(e){S(e);var t=T.filter((function(t){return e.includes(t.title)})),n=[];t.map((function(e){return n.push(e.id)})),I(n)},selectedItems:R,optionsClassname:M.optionsClassname,placeholder:"Выберите медали"}),(0,a.jsx)(m.h,{name:"photo",type:"file",message:"Загрузите фото героя"}),(0,a.jsx)(d.z,D({type:"submit",style:{marginLeft:"auto"},theme:p.bn.PRIMARY},{children:"Отправить"}))]}))]}))}))}))},9454:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(8081),r=n.n(a),o=n(3645),l=n.n(o)()(r());l.push([e.id,".d7bcb{border-radius:10px;display:flex;flex-direction:column;gap:10px}.a7b09{width:50px;height:50px;border-radius:30%}.cee1b{display:flex;align-items:center;gap:10px}.e8fb5{font-size:14px}.c128f{display:grid;grid-template-columns:1fr 1fr;grid-gap:10px}",""]),l.locals={createHeroForm:"d7bcb",photo:"a7b09",awardRow:"cee1b",awardTitle:"e8fb5",optionsClassname:"c128f"};const i=l},2670:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(8081),r=n.n(a),o=n(3645),l=n.n(o)()(r());l.push([e.id,".dfad5{position:relative}li{list-style-type:none}.ecf69{margin:0;padding:0;border:none;background:none;outline:none}.f78ba{padding:10px;border:2px solid var(--inverted-primary-color);border-radius:12px;background:var(--inverted-bg-color);position:absolute;z-index:10000}.a7e96{margin-bottom:5px}.a7e96:hover{cursor:pointer}.a7e96:last-child{margin:0}.ba924{padding:5px;border-radius:5px;background:var(--bg-color)}",""]),l.locals={HSelect:"dfad5",trigger:"ecf69",options:"f78ba",option:"a7e96",selected:"ba924"};const i=l}}]);